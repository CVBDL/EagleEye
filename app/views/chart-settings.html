<div class="ee-view">
  <md-content class="ee-view__content-container ee-content--transparent">
    <div md-whiteframe="1" class="ee-content">
      <md-toolbar class="ee-toolbar">
        <div class="md-toolbar-tools">
          <h2 class="ee-text-black-primary">Setting data source for : {{ctrl.chart.options.title}}</h2>
          <span flex></span>
          <md-button class="md-icon-button" aria-label="View chart" ui-sref="chart({ id: ctrl.id })">
            <md-tooltip md-direction="botton">View chart</md-tooltip>
            <md-icon md-font-set="material-icons" class="ee-icon ee-icon--accent"> show_chart </md-icon>
          </md-button>
        </div>
      </md-toolbar>
      <md-divider></md-divider>

      <!-- Google Chart Types -->
      <div ng-if="ctrl.chart.chartType !== 'ImageChart'" layout="row" layout-padding layout-wrap>
        <div class="ee-card-container ee-data-options-card-container" flex="50" flex-xs="100">
          <md-card class="ee-layout--no-margin" layout-fill>
            <md-card-title>
              <md-card-title-text>
                <span class="md-headline">Option 1: Manually</span>
                <span class="md-subhead">You could upload the data file (.xsl) to server manually to update the chart's data.</span>
              </md-card-title-text>
            </md-card-title>
            <md-card-actions layout="row" layout-align="end center">
              <md-button class="ee-button--accent" aria-label="file download">
                <a class="ee-button--accent" ng-href="{{ctrl.chart.browserDownloadUrl.excel}}">Go to Download</a>
              </md-button>
              <span>&gt;</span>
              <md-button class="ee-button--accent" ngf-select ng-model="ctrl.excelFile" name="file">Choose File</md-button>
              <span>&gt;</span>
              <md-button class="ee-button--accent" aria-label="Submit" ng-click="ctrl.upload(ctrl.excelFile)">Submit</md-button>
            </md-card-actions>
            <md-progress-linear ng-show="ctrl.excelFile.progress >= 0" md-mode="determinate" value="ctrl.excelFile.progress"></md-progress-linear>
            <div>
              <span ng-show="ctrl.excelFile.progress == 100">Upload Successful</span>
            </div>
            <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
          </md-card>
        </div>
        <div class="ee-card-container ee-data-options-card-container" flex="50" flex-xs="100">
          <md-card class="ee-layout--no-margin" layout-fill>
            <md-card-title>
              <md-card-title-text>
                <span class="md-headline">Option 2: Automatically</span>
                <span class="md-subhead">Or you're able able to schedule a job to update the chart's data automatically. But it requires more effort to configure the job.</span>
              </md-card-title-text>
            </md-card-title>
            <md-card-actions layout="row" layout-align="end center">
              <md-button class="ee-button--accent" ui-sref="chartJobCreation({ id: ctrl.id })">Schedule new job</md-button>
            </md-card-actions>
          </md-card>
        </div>
      </div>

      <!-- Custom Image Chart Type -->
      <div ng-if="ctrl.chart.chartType === 'ImageChart'" layout="row" layout-padding>
        <div class="ee-card-container" flex="100">
          <md-card layout-fill class="ee-layout--no-margin">
            <md-card-title>
              <md-card-title-media class="ee-layout--no-margin">
                <md-icon md-font-set="material-icons" class="ee-icon"> looks_one </md-icon>
              </md-card-title-media>
              <md-card-title-text>
                <span class="md-headline">Upload image</span>
                <span class="md-subhead">Please select an image to upload.</span>
              </md-card-title-text>
            </md-card-title>
            <md-card-actions layout="row" layout-align="end center">
              <md-button class="ee-button--accent" ngf-select ng-model="ctrl.excelFile" name="file">Choose File</md-button>
              <md-button class="ee-button--accent" aria-label="Submit" ng-click="ctrl.upload(ctrl.excelFile)">Submit</md-button>
            </md-card-actions>
            <md-progress-linear ng-show="ctrl.excelFile.progress >= 0" md-mode="determinate" value="ctrl.excelFile.progress"></md-progress-linear>
            <div>
              <span ng-show="ctrl.excelFile.progress == 100">Upload Successful</span>
            </div>
            <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
          </md-card>
        </div>
      </div>

      <md-divider></md-divider>

      <!-- TODO: Current job lists -->
      <div ng-if="ctrl.chart.chartType !== 'ImageChart'" layout="row" layout-padding>
        <div flex="100">
          <h3 class="md-subhead">Current Jobs:</h3>
        </div>
      </div>

    </div>
  </md-content>
</div>
